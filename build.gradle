plugins {
   id "name.remal.check-dependency-updates" version "${cdu_ver}"
   id "io.spring.dependency-management" version "${spring_dep}"
   id 'org.springframework.boot' version "${spring_boot_ver}"
}

ext {
    lib = [ "eva_core": "io.nerv:eva-core:${eva}",
            "eva_sys": "io.nerv:eva-sys:${eva}",
            "eva_auth": "io.nerv:eva-auth:${eva}",
            "hutool" : "cn.hutool:hutool-all:${hutool}",
            "boot" : "org.springframework.boot:spring-boot-dependencies:${spring_boot_ver}",
            // lombok
            "lombok" : "org.projectlombok:lombok:${lombok}",
            // test
            "test" : "org.springframework.boot:spring-boot-starter-test",
            "boot_web": "org.springframework.boot:spring-boot-starter-web",
            // spring cloud
            "cloud": "org.springframework.cloud:spring-cloud-dependencies:${cloud}",
            "alibaba":"com.alibaba.cloud:spring-cloud-alibaba-dependencies:${alibaba}",
            "nacos_config":"com.alibaba.cloud:spring-cloud-starter-alibaba-nacos-config",
            "nacos_client":"com.alibaba.cloud:spring-cloud-starter-alibaba-nacos-discovery",
            "sentinel":"com.alibaba.cloud:spring-cloud-starter-alibaba-sentinel",
            "feign":"org.springframework.cloud:spring-cloud-starter-openfeign",
            "feignHttp": "io.github.openfeign:feign-httpclient",
            "gateway": "org.springframework.cloud:spring-cloud-starter-gateway",
            "security": "org.springframework.cloud:spring-cloud-starter-security",
            "oauth2": "org.springframework.cloud:spring-cloud-starter-oauth2",
            "oauth2_client": "org.springframework.security:spring-security-oauth2-client",
            "resource_server": "org.springframework.security:spring-security-oauth2-resource-server",
            "jose": "org.springframework.security:spring-security-oauth2-jose",
            "jwt": "com.nimbusds:nimbus-jose-jwt:${jwt}"
    ]
}

allprojects {
    apply plugin: "name.remal.check-dependency-updates"
    group = 'io.nerv'
    version = '2.5.6'
}

subprojects {
    apply plugin: 'java-library'
    apply plugin: 'io.spring.dependency-management'

	sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11

    dependencyManagement {
        imports {
            mavenBom "${lib.boot}"
            mavenBom "${lib.cloud}"
            mavenBom "${lib.alibaba}"
        }
    }
    
    tasks.withType(JavaCompile) {
        options.encoding = "UTF-8"
    }
	
	tasks.withType(Javadoc) {
        options.encoding = "UTF-8"
		options.addStringOption('Xdoclint:none', '-quiet')
    }

    repositories {
        mavenLocal()
        maven { url"https://maven.aliyun.com/repository/central" }
        maven { url"https://maven.aliyun.com/repository/jcenter" }
        maven { url"https://mirrors.huaweicloud.com" }
        maven { url"https://maven.aliyun.com/repository/spring" }
        maven { url"https://maven.aliyun.com/repository/spring-plugin" }
		maven { url"https://maven.springframework.org"}
        maven { url"https://repo.spring.io/libs-release" }
        jcenter()
        mavenCentral()
    }

    dependencies {
        implementation "${lib.lombok}"

        annotationProcessor "${lib.lombok}"

        testImplementation "${lib.test}"

     }
}

