import org.apache.tools.ant.filters.ReplaceTokens
apply plugin: "org.springframework.boot"

project.archivesBaseName = 'eva-dubbo-provider'
project.description='eva dubbo provider demo'

jar {
    enabled = true
}

bootJar {
    mainClass = 'io.nerv.ProviderBooter'
}

compileJava.dependsOn(processResources)

processResources {
    println "==> Load configuration for $profile"
    filesMatching('**/*.yaml') {
        filter(ReplaceTokens, tokens: [profile: profile])
    }
}

dependencies {

    api("${lib.web}"){
        exclude module: 'spring-boot-starter-tomcat'
    }
    api "${lib.undertow}"

    implementation project(":eva-cloud-api:eva-dubbo-service"),
                   "${lib.dubbo}",
                   "${lib.dubbo_client}"
}
